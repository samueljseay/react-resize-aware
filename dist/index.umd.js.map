{"version":3,"file":"index.umd.js","sources":["../src/ResizeListener.js","../src/useOnResize.js","../src/useResizeAware.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport useOnResize from './useOnResize';\n\nconst style = {\n  display: 'block',\n  opacity: 0,\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  height: '100%',\n  width: '100%',\n  overflow: 'hidden',\n  pointerEvents: 'none',\n  zIndex: -1,\n};\n\n// This automatically attaches to itself the resize event listener\n// and adds onResize as callback\nexport default ({\n  onResize,\n}: {\n  onResize: (React.ElementRef<any>) => void,\n}) => {\n  const ref = React.useRef();\n  useOnResize(ref, () => onResize(ref));\n\n  return (\n    <iframe\n      style={style}\n      src=\"about:blank\"\n      ref={ref}\n      aria-hidden={true}\n      tabIndex={-1}\n      frameBorder={0}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\n\n// This is just an utility to cleanly attach a `resize` event listener\n// to a target HTMLObjectElement or HTMLIFrameElement\n// The real Hook is `useResizeAware.js`\nexport default (ref: React.ElementRef<any>, onResize: () => void) => {\n  const getTarget = () => ref.current && ref.current.contentDocument && ref.current.contentDocument.defaultView;\n  function run() {\n    // trigger onResize event on mount to provide initial sizes\n    onResize();\n    var target = getTarget();\n    target && target.addEventListener('resize', onResize);\n  }\n  React.useEffect(() => {\n    if (getTarget()) {\n      run();\n    }\n    else if (ref.current && ref.current.addEventListener) {\n      ref.current.addEventListener('load', run)\n    }\n\n    // clean event listener on unmount\n    return () => {\n      // Ensure the target exists and is in fact an event listener\n      // this fixes an issue where contentDocument.defaultView is not a real window object\n      // as can be the case when used with React portals\n      const target = getTarget();\n      const isListener =\n        target && typeof target.removeEventListener === 'function';\n\n      isListener && target.removeEventListener('resize', onResize);\n    };\n  }, []);\n};\n","// @flow\nimport * as React from 'react';\nimport ResizeListener from './ResizeListener';\n\nconst defaultReporter = (target: ?HTMLElement) => ({\n  width: target != null ? target.offsetWidth : null,\n  height: target != null ? target.offsetHeight : null,\n});\n\nexport default function useResizeAware(\n  reporter: typeof defaultReporter = defaultReporter\n) {\n  const [sizes, setSizes] = React.useState(reporter(null));\n  const onResize = React.useCallback(ref => setSizes(reporter(ref.current)), [\n    reporter,\n  ]);\n  const resizeListenerNode = React.useMemo(\n    () => <ResizeListener onResize={onResize} />,\n    [onResize]\n  );\n\n  return [resizeListenerNode, sizes];\n}\n"],"names":["style","display","opacity","position","top","left","height","width","overflow","pointerEvents","zIndex","onResize","ref","React","useRef","getTarget","current","contentDocument","defaultView","run","target","addEventListener","useEffect","removeEventListener","useOnResize","_jsx","src","tabIndex","frameBorder","defaultReporter","offsetWidth","offsetHeight","reporter","useState","sizes","setSizes","useCallback","useMemo","ResizeListener"],"mappings":"kmBAIMA,EAAQ,CACZC,QAAS,QACTC,QAAS,EACTC,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,OAAQ,OACRC,MAAO,OACPC,SAAU,SACVC,cAAe,OACfC,QAAS,qBAMTC,IAAAA,SAIMC,EAAMC,EAAMC,SAGlB,gBCrBcF,EAA4BD,GAC1C,IAAMI,EAAY,kBAAMH,EAAII,SAAWJ,EAAII,QAAQC,iBAAmBL,EAAII,QAAQC,gBAAgBC,aAClG,SAASC,IAEPR,IACA,IAAIS,EAASL,IACbK,GAAUA,EAAOC,iBAAiB,SAAUV,GAE9CE,EAAMS,UAAU,WASd,OARIP,IACFI,IAEOP,EAAII,SAAWJ,EAAII,QAAQK,kBAClCT,EAAII,QAAQK,iBAAiB,OAAQF,cAQrC,IAAMC,EAASL,IAEbK,GAAgD,mBAA/BA,EAAOG,qBAEZH,EAAOG,oBAAoB,SAAUZ,KAEpD,IDRHa,CAAYZ,EAAK,kBAAMD,EAASC,kBAG9Ba,gBACEzB,MAAOA,EACP0B,IAAI,cACJd,IAAKA,EACL,eAAa,EACbe,UAAW,EACXC,YAAa,KE9BbC,EAAkB,SAACT,SAA0B,CACjDb,MAAiB,MAAVa,EAAiBA,EAAOU,YAAc,KAC7CxB,OAAkB,MAAVc,EAAiBA,EAAOW,aAAe,uBAI/CC,YAAAA,IAAAA,EAAmCH,GAEnC,MAA0BhB,EAAMoB,SAASD,EAAS,OAA3CE,OAAOC,OACRxB,EAAWE,EAAMuB,YAAY,SAAAxB,UAAOuB,EAASH,EAASpB,EAAII,WAAW,CACzEgB,IAOF,MAAO,CALoBnB,EAAMwB,QAC/B,+BAAMZ,MAACa,GAAe3B,SAAUA,KAChC,CAACA,IAGyBuB"}